groups:
  - name: url-api-latency
    interval: 20s
    rules:
      - record: url_api:http_server_requests_seconds:p50
        expr: |
          histogram_quantile(
            0.50,
            sum(rate(http_server_requests_seconds_bucket[1m])) by (le)
          )

      - record: url_api:http_server_requests_seconds:p95
        expr: |
          histogram_quantile(
            0.95,
            sum(rate(http_server_requests_seconds_bucket[1m])) by (le)
          )

      - record: url_api:http_server_requests_seconds:p99
        expr: |
          histogram_quantile(
            0.99,
            sum(rate(http_server_requests_seconds_bucket[1m])) by (le)
          )
